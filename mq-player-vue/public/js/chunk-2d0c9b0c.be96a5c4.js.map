{"version":3,"sources":["webpack:///./src/renderer/views/RankList.vue?2b28","webpack:///./src/renderer/views/RankList.vue?f960","webpack:///./src/renderer/views/RankList.vue"],"names":["_hoisted_1","class","style","_hoisted_2","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","render","_ctx","_cache","$props","$setup","$data","$options","_component_hl_button","_resolveComponent","_component_icon","_component_table_view","_component_accordion","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","icon","default","_withCtx","_","onClick","$event","multiple","_toDisplayString","selection","columns","data","songList","onRowDblclick","playMediaList","onInfiniteScroll","loadDataList","title","item","vip","_createBlock","key","name","width","height","_createCommentVNode","vid","singer","singers","_renderList","index","mid","album","list","rankList","onChange","onRankChanged","defineComponent","setup","currentRankItem","reactive","page","current","size","type","property","flex","ref","Spinner","open","getRanksSongList","then","Object","assign","splice","length","finally","close","rankItem","rankType","Message","pageCount","push","catch","__exports__"],"mappings":"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","file":"public/js/chunk-2d0c9b0c.be96a5c4.js","sourcesContent":["import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  class: \"v-row\",\n  style: {\"gap\":\"8px\",\"margin\":\"0 0 1em 0\",\"--button-icon-size\":\"1.5em\"}\n}\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"播放全部\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"添加到\")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"下载\")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"删除\")\nconst _hoisted_6 = {\n  class: \"v-row\",\n  style: {\"flex\":\"1\",\"align-items\":\"stretch\",\"overflow\":\"hidden\"}\n}\nconst _hoisted_7 = { class: \"cell-text\" }\nconst _hoisted_8 = [\"data-mid\"]\nconst _hoisted_9 = [\"data-mid\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_hl_button = _resolveComponent(\"hl-button\")!\n  const _component_icon = _resolveComponent(\"icon\")!\n  const _component_table_view = _resolveComponent(\"table-view\")!\n  const _component_accordion = _resolveComponent(\"accordion\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_hl_button, { icon: \"play-select\" }, {\n        default: _withCtx(() => [\n          _hoisted_2\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_hl_button, { icon: \"plus\" }, {\n        default: _withCtx(() => [\n          _hoisted_3\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_hl_button, { icon: \"my-download\" }, {\n        default: _withCtx(() => [\n          _hoisted_4\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_hl_button, { icon: \"trash\" }, {\n        default: _withCtx(() => [\n          _hoisted_5\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_hl_button, {\n        icon: \"multiple\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.multiple = !_ctx.multiple))\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(_ctx.multiple ? '退出批量操作' : '批量操作'), 1)\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createVNode(_component_table_view, {\n        style: {\"flex\":\"auto\"},\n        selection: _ctx.multiple,\n        columns: _ctx.columns,\n        data: _ctx.songList,\n        onRowDblclick: _ctx.playMediaList,\n        onInfiniteScroll: _ctx.loadDataList\n      }, {\n        title: _withCtx(({item}) => [\n          _createElementVNode(\"span\", _hoisted_7, _toDisplayString(item.title), 1),\n          (item.vip)\n            ? (_openBlock(), _createBlock(_component_icon, {\n                key: 0,\n                class: \"vip-icon\",\n                name: \"vip\",\n                width: \"1em\",\n                height: \"1em\"\n              }))\n            : _createCommentVNode(\"\", true),\n          (item.vid)\n            ? (_openBlock(), _createBlock(_component_icon, {\n                key: 1,\n                class: \"mv-icon\",\n                name: \"mv\",\n                width: \"1em\",\n                height: \"1em\"\n              }))\n            : _createCommentVNode(\"\", true)\n        ]),\n        singer: _withCtx(({item:{singer:singers = []}}) => [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(singers, (singer, index) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: \"link cell-text\",\n              key: index,\n              \"data-mid\": singer.mid\n            }, _toDisplayString(singer.name), 9, _hoisted_8))\n          }), 128))\n        ]),\n        album: _withCtx(({item:{album}}) => [\n          album\n            ? (_openBlock(), _createElementBlock(\"span\", {\n                key: 0,\n                class: \"link cell-text\",\n                \"data-mid\": album.mid\n              }, _toDisplayString(album.name), 9, _hoisted_9))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      }, 8, [\"selection\", \"columns\", \"data\", \"onRowDblclick\", \"onInfiniteScroll\"]),\n      _createVNode(_component_accordion, {\n        style: {\"flex\":\"none\"},\n        list: _ctx.rankList,\n        onChange: _ctx.onRankChanged\n      }, null, 8, [\"list\", \"onChange\"])\n    ])\n  ], 64))\n}","\r\nimport {defineComponent, reactive, ref} from 'vue';\r\nimport {playMediaList} from '../player/hooks';\r\nimport Message from '../components/Message';\r\nimport Spinner from '../components/Spinner';\r\n\r\nimport {getRanksSongList} from '../api';\r\nimport {ComputedPage, Rank, RankItem, Song} from 'src/types';\r\nimport {TableColumn} from '../components/types';\r\n\r\nexport default defineComponent({\r\n  name: 'RankList',\r\n\r\n  setup() {\r\n    let currentRankItem: RankItem = null as any;\r\n\r\n    const rankList = reactive<Rank[]>([]);\r\n    const songList = reactive<Song[]>([]);\r\n    const page = {current: 1, size: 30} as ComputedPage;\r\n\r\n    const columns: TableColumn[] = [\r\n      {type: 'index', width: '100px'},\r\n      {title: '歌曲', property: 'title', flex: true},\r\n      {title: '歌手', property: 'singer'},\r\n      {title: '专辑', property: 'album'},\r\n      {title: '时长', property: 'duration', width: '100px'},\r\n    ];\r\n\r\n    const multiple = ref(false);\r\n\r\n    Spinner.open();\r\n    getRanksSongList(page, currentRankItem).then(data => {\r\n      // 获取 total(总数据条数) 和 size(每页数据量,有可能会被重设为其他值)\r\n      data.page && Object.assign(page, data.page);\r\n\r\n      data.rankList && rankList.splice(0, rankList.length, ...data.rankList);\r\n\r\n      songList.splice(0, songList.length, ...data.list);\r\n\r\n    }).finally(Spinner.close);\r\n\r\n    return {\r\n      rankList, songList, columns, multiple,\r\n\r\n      /**\r\n       * 所选榜单发生改变时,获取最新的歌曲列表数据\r\n       *\r\n       * @param rankItem 榜单项信息\r\n       * @param rankType 榜单项所属分类\r\n       */\r\n      onRankChanged(rankItem: RankItem, rankType: Rank) {\r\n        currentRankItem = rankItem;\r\n        Message(`榜单分类：${rankType.title} 对应的榜单项：${rankItem.name}`);\r\n\r\n        Spinner.open();\r\n        page.current = 1;\r\n\r\n        getRanksSongList(page, rankItem).then(data => {\r\n          data.page && Object.assign(page, data.page);\r\n          songList.splice(0, songList.length, ...data.list)\r\n\r\n        }).finally(Spinner.close);\r\n      },\r\n\r\n      playMediaList,\r\n\r\n      /** 加载歌曲数据到表格视图中 */\r\n      loadDataList() {\r\n        // 若还有数据, 则发起网络请求加载歌曲数据列表\r\n        if (page.current >= 1 && page.current < page.pageCount) {\r\n          ++page.current;\r\n          Spinner.open();\r\n\r\n          getRanksSongList(page, currentRankItem).then(data => {\r\n            // 重设置分页信息\r\n            data.page && Object.assign(page, data.page);\r\n            // 添加歌曲\r\n            songList.push(...data.list);\r\n\r\n          }).catch(() => --page.current).finally(Spinner.close);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n});\r\n","import { render } from \"./RankList.vue?vue&type=template&id=ea9d2890&ts=true\"\nimport script from \"./RankList.vue?vue&type=script&lang=ts\"\nexport * from \"./RankList.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\SCMQ\\\\project\\\\HTML\\\\mq-player-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}