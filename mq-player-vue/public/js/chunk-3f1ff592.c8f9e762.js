(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f1ff592"],{1503:function(e,t,a){"use strict";a("3274")},3109:function(e,t,a){"use strict";a.r(t);var c=a("f2bf");const n=["data-tag"];function i(e,t,a,i,l,s){const o=Object(c["J"])("image-view"),r=Object(c["J"])("grid-view");return Object(c["z"])(),Object(c["h"])(c["a"],null,[(Object(c["z"])(!0),Object(c["h"])(c["a"],null,Object(c["H"])(e.tags,(a,i)=>(Object(c["z"])(),Object(c["h"])("div",{class:"v-row list-view",key:i,onClick:t[0]||(t[0]=(...t)=>e.onListViewClicked&&e.onListViewClicked(...t))},[(Object(c["z"])(!0),Object(c["h"])(c["a"],null,Object(c["H"])(a,t=>(Object(c["z"])(),Object(c["h"])("div",{class:Object(c["s"])(["item",{active:t.id===e.singerTagParam[t.group]}]),key:t.id,"data-tag":t.value},Object(c["M"])(t.name),11,n))),128))]))),128)),Object(c["l"])(r,{style:{"margin-top":"1em"},data:e.singerList,"cell-widths":"repeat(auto-fit, 13em)","cell-height":234,onCellClick:e.navigateTo,onInfiniteScroll:e.loadData},{default:Object(c["Q"])(({item:e})=>[Object(c["l"])(o,{modelValue:e.cover,"onUpdate:modelValue":t=>e.cover=t,defaultValue:"/icon/singer.png"},null,8,["modelValue","onUpdate:modelValue"]),Object(c["i"])("div",null,Object(c["M"])(e.name),1)]),_:1},8,["data","onCellClick","onInfiniteScroll"])],64)}var l=a("846d"),s=a("c25e"),o=a("6c02"),r=Object(c["m"])({name:"SingerListView",setup(){const e=Object(c["D"])([]),t=Object(c["D"])([]),a=Object(c["D"])({}),n={current:1,size:30,total:0},i=Object(o["d"])();return Object(c["x"])(()=>{s["a"].open(),Object(l["k"])(n,null).then(c=>{c.page&&Object.assign(n,c.page);const i=[],l=c.tags;Object.keys(l).forEach(e=>{const t=e,c=l[t];a[t]=c[0]&&c[0].id,c.forEach(t=>t.value=`${t.group=e};${t.id}`),i.push(c)}),e.splice(0,e.length,...i),t.splice(0,t.length,...c.list)}).finally(s["a"].close)}),{tags:e,singerList:t,singerTagParam:a,onListViewClicked(e){const c=e.target.getAttribute("data-tag");if(!c)return;const[i,o]=c.split(";");a[i]!==o&&i&&(a[i]=o,n.current=1,s["a"].open(),Object(l["k"])(n,a).then(e=>{e.page&&Object.assign(n,e.page),t.splice(0,t.length,...e.list)}).catch(()=>--n.current).finally(s["a"].close))},navigateTo(e){i.push({path:"/singer-view",query:e})},loadData(){n.current>=1&&n.current<n.pageCount&&(s["a"].open(),++n.current,Object(l["k"])(n,a).then(e=>{e.page&&Object.assign(n,e.page),t.push(...e.list)}).catch(()=>--n.current).finally(s["a"].close))}}}}),u=(a("1503"),a("6b0d")),b=a.n(u);const g=b()(r,[["render",i],["__scopeId","data-v-31f6da59"]]);t["default"]=g},3274:function(e,t,a){}}]);
//# sourceMappingURL=chunk-3f1ff592.c8f9e762.js.map