{"version":3,"sources":["webpack:///./src/renderer/views/AlbumView.vue?972d","webpack:///./src/renderer/views/AlbumView.vue?0d2f","webpack:///./src/renderer/views/AlbumView.vue"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","style","_hoisted_9","_createTextVNode","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","render","_ctx","_cache","$props","$setup","$data","$options","_component_image_view","_resolveComponent","_component_hl_button","_component_icon","_component_table_view","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","modelValue","album","cover","$event","defaultValue","_toDisplayString","name","genre","language","company","year","icon","default","_withCtx","_","onClick","multiple","selection","columns","data","songList","onRowDblclick","playMediaList","onInfiniteScroll","loadDataList","title","item","vip","_createBlock","key","width","height","_createCommentVNode","vid","singer","singers","_renderList","index","mid","introduce","defineComponent","props","query","Object","setup","reactive","page","current","size","total","type","property","flex","ref","watch","newQuery","Spinner","open","getAlbumSongList","then","assign","splice","length","list","finally","close","immediate","pageCount","push","catch","__exports__"],"mappings":"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","file":"public/js/chunk-2d22d9da.b802b00d.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"v-row data-container\" }\nconst _hoisted_2 = { class: \"v-column\" }\nconst _hoisted_3 = { class: \"v-row data-statistic\" }\nconst _hoisted_4 = { class: \"statistic-item\" }\nconst _hoisted_5 = { class: \"statistic-item\" }\nconst _hoisted_6 = { class: \"statistic-item\" }\nconst _hoisted_7 = { class: \"statistic-item\" }\nconst _hoisted_8 = {\n  class: \"v-row\",\n  style: {\"--button-icon-size\":\"1.5em\"}\n}\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"播放全部\")\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"添加到\")\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\"下载\")\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\"删除\")\nconst _hoisted_13 = {\n  class: \"v-row\",\n  style: {\"margin\":\"1em 0 0 0\",\"flex\":\"auto\",\"overflow\":\"hidden\",\"align-items\":\"stretch\"}\n}\nconst _hoisted_14 = { class: \"cell-text\" }\nconst _hoisted_15 = [\"data-mid\"]\nconst _hoisted_16 = [\"data-mid\"]\nconst _hoisted_17 = {\n  class: \"label\",\n  style: {\"margin\":\"0 0 0 1em\",\"padding\":\"0 1em 0 0\",\"width\":\"15em\"}\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_image_view = _resolveComponent(\"image-view\")!\n  const _component_hl_button = _resolveComponent(\"hl-button\")!\n  const _component_icon = _resolveComponent(\"icon\")!\n  const _component_table_view = _resolveComponent(\"table-view\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_image_view, {\n        modelValue: _ctx.album.cover,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.album.cover) = $event)),\n        defaultValue: \"icon/album.png\"\n      }, null, 8, [\"modelValue\"]),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", null, _toDisplayString(_ctx.album.name || '-'), 1),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"span\", _hoisted_4, \"流派：\" + _toDisplayString(_ctx.album.genre || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_5, \"语种：\" + _toDisplayString(_ctx.album.language || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_6, \"唱片公司：\" + _toDisplayString(_ctx.album.company || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_7, \"发行时间：\" + _toDisplayString(_ctx.album.year || '-'), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createVNode(_component_hl_button, { icon: \"play-select\" }, {\n            default: _withCtx(() => [\n              _hoisted_9\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_hl_button, { icon: \"plus\" }, {\n            default: _withCtx(() => [\n              _hoisted_10\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_hl_button, { icon: \"my-download\" }, {\n            default: _withCtx(() => [\n              _hoisted_11\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_hl_button, { icon: \"trash\" }, {\n            default: _withCtx(() => [\n              _hoisted_12\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_hl_button, {\n            icon: \"multiple\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.multiple = !_ctx.multiple))\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(_toDisplayString(_ctx.multiple ? '退出批量操作' : '批量操作'), 1)\n            ]),\n            _: 1\n          })\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_13, [\n      _createVNode(_component_table_view, {\n        style: {\"flex\":\"auto\"},\n        selection: _ctx.multiple,\n        columns: _ctx.columns,\n        data: _ctx.songList,\n        onRowDblclick: _ctx.playMediaList,\n        onInfiniteScroll: _ctx.loadDataList\n      }, {\n        title: _withCtx(({item}) => [\n          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(item.title), 1),\n          (item.vip)\n            ? (_openBlock(), _createBlock(_component_icon, {\n                key: 0,\n                class: \"vip-icon\",\n                name: \"vip\",\n                width: \"1em\",\n                height: \"1em\"\n              }))\n            : _createCommentVNode(\"\", true),\n          (item.vid)\n            ? (_openBlock(), _createBlock(_component_icon, {\n                key: 1,\n                class: \"mv-icon\",\n                name: \"mv\",\n                width: \"1em\",\n                height: \"1em\"\n              }))\n            : _createCommentVNode(\"\", true)\n        ]),\n        singer: _withCtx(({item:{singer:singers = []}}) => [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(singers, (singer, index) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: \"link cell-text\",\n              key: index,\n              \"data-mid\": singer.mid\n            }, _toDisplayString(singer.name), 9, _hoisted_15))\n          }), 128))\n        ]),\n        album: _withCtx(({item:{album}}) => [\n          album\n            ? (_openBlock(), _createElementBlock(\"span\", {\n                key: 0,\n                class: \"link cell-text\",\n                \"data-mid\": album.mid\n              }, _toDisplayString(album.name), 9, _hoisted_16))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      }, 8, [\"selection\", \"columns\", \"data\", \"onRowDblclick\", \"onInfiniteScroll\"]),\n      _createElementVNode(\"div\", _hoisted_17, \" 简介：\" + _toDisplayString(_ctx.album.introduce), 1)\n    ])\n  ], 64))\n}","\r\nimport Spinner from '../components/Spinner';\r\nimport {playMediaList} from '../player/hooks';\r\nimport {getAlbumSongList} from '../api';\r\n\r\nimport {Album, ComputedPage, Song} from '../../types';\r\n\r\nimport {reactive, watch, defineComponent, PropType, ref} from 'vue';\r\nimport {TableColumn} from '../components/types';\r\n\r\nexport default defineComponent({\r\n  name: 'AlbumView',\r\n\r\n  props: {query: Object as PropType<Album>},\r\n\r\n  setup(props) {\r\n    const songList = reactive<Song[]>([]);\r\n    const album = reactive<Album>({mid: '', name: '', cover: '', company: ''});\r\n    const page = {current: 1, size: 30, total: 1} as ComputedPage;\r\n\r\n    const columns: TableColumn[] = [\r\n      {type: 'index', width: '100px'},\r\n      {title: '歌曲', property: 'title', flex: true},\r\n      {title: '歌手', property: 'singer'},\r\n      {title: '时长', property: 'duration', width: '100px'},\r\n      {title: '大小', property: 'size', width: '100px'}\r\n    ];\r\n\r\n    const multiple = ref(false);\r\n\r\n    watch(() => props.query, newQuery => {\r\n      if (newQuery && album.mid !== newQuery.mid) {\r\n        Spinner.open();\r\n\r\n        getAlbumSongList(page, newQuery).then(data => {\r\n          // 重设分页信息\r\n          Object.assign(page, data.page);\r\n          // 更新专辑信息\r\n          data.album && Object.assign(album, data.album);\r\n          // 添加歌曲数据\r\n          songList.splice(0, songList.length, ...data.list);\r\n\r\n        }).finally(Spinner.close);\r\n      }\r\n\r\n    }, {immediate: true});\r\n\r\n    return {\r\n      songList, page, album, columns, multiple,\r\n\r\n      playMediaList,\r\n\r\n      /** 加载歌曲数据到表格视图中 */\r\n      loadDataList() {\r\n        // 若还有数据, 则发起网络请求加载歌曲数据列表\r\n        if (page.current >= 1 && page.current < page.pageCount) {\r\n          ++page.current;\r\n          Spinner.open();\r\n\r\n          getAlbumSongList(page, album).then(data => {\r\n            // 重设置分页信息\r\n            data.page && Object.assign(page, data.page);\r\n            // 添加歌曲\r\n            songList.push(...data.list);\r\n\r\n          }).catch(() => --page.current).finally(Spinner.close);\r\n        }\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n});\r\n","import { render } from \"./AlbumView.vue?vue&type=template&id=73194739&ts=true\"\nimport script from \"./AlbumView.vue?vue&type=script&lang=ts\"\nexport * from \"./AlbumView.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\SCMQ\\\\project\\\\HTML\\\\mq-player-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}