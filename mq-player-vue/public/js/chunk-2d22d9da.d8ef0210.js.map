{"version":3,"sources":["webpack:///./src/renderer/views/AlbumView.vue?0b6c","webpack:///./src/renderer/views/AlbumView.vue?0d2f","webpack:///./src/renderer/views/AlbumView.vue"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","style","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","render","_ctx","_cache","$props","$setup","$data","$options","_component_image_view","_resolveComponent","_component_Button","_component_icon","_component_table_view","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","modelValue","album","cover","$event","defaultValue","_toDisplayString","name","genre","language","company","year","text","prefixIcon","prefixIconSize","multiple","columns","data","songList","onRowDblclick","playMediaList","onInfiniteScroll","loadDataList","title","_withCtx","item","vip","_createBlock","key","width","height","_createCommentVNode","vid","singer","singers","_renderList","index","mid","_","introduce","defineComponent","props","query","Object","setup","reactive","page","current","size","total","type","property","flex","ref","watch","newQuery","Spinner","open","getAlbumSongList","then","assign","splice","length","list","finally","close","immediate","pageCount","push","catch","__exports__"],"mappings":"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","file":"public/js/chunk-2d22d9da.d8ef0210.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, withCtx as _withCtx } from \"vue\"\n\nconst _hoisted_1 = { class: \"v-row data-container\" }\nconst _hoisted_2 = { class: \"v-column\" }\nconst _hoisted_3 = { class: \"v-row data-statistic\" }\nconst _hoisted_4 = { class: \"statistic-item\" }\nconst _hoisted_5 = { class: \"statistic-item\" }\nconst _hoisted_6 = { class: \"statistic-item\" }\nconst _hoisted_7 = { class: \"statistic-item\" }\nconst _hoisted_8 = { class: \"v-row\" }\nconst _hoisted_9 = {\n  class: \"v-row\",\n  style: {\"margin\":\"1em 0 0 0\",\"flex\":\"auto\",\"overflow\":\"hidden\",\"align-items\":\"stretch\"}\n}\nconst _hoisted_10 = { class: \"cell-text\" }\nconst _hoisted_11 = [\"data-mid\"]\nconst _hoisted_12 = [\"data-mid\"]\nconst _hoisted_13 = {\n  class: \"label\",\n  style: {\"margin\":\"0 0 0 1em\",\"padding\":\"0 1em 0 0\",\"width\":\"15em\"}\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_image_view = _resolveComponent(\"image-view\")!\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_icon = _resolveComponent(\"icon\")!\n  const _component_table_view = _resolveComponent(\"table-view\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_image_view, {\n        modelValue: _ctx.album.cover,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.album.cover) = $event)),\n        defaultValue: \"icon/album.png\"\n      }, null, 8, [\"modelValue\"]),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", null, _toDisplayString(_ctx.album.name || '-'), 1),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"span\", _hoisted_4, \"流派：\" + _toDisplayString(_ctx.album.genre || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_5, \"语种：\" + _toDisplayString(_ctx.album.language || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_6, \"唱片公司：\" + _toDisplayString(_ctx.album.company || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_7, \"发行时间：\" + _toDisplayString(_ctx.album.year || '-'), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createVNode(_component_Button, {\n            text: \"播放全部\",\n            prefixIcon: \"play-select\",\n            prefixIconSize: \"1.5em\"\n          }),\n          _createVNode(_component_Button, {\n            text: \"添加到\",\n            prefixIcon: \"plus\",\n            prefixIconSize: \"1.5em\"\n          }),\n          _createVNode(_component_Button, {\n            text: \"下载\",\n            prefixIcon: \"my-download\",\n            prefixIconSize: \"1.5em\"\n          }),\n          _createVNode(_component_Button, {\n            text: \"删除\",\n            prefixIcon: \"trash\",\n            prefixIconSize: \"1.5em\"\n          }),\n          _createVNode(_component_Button, {\n            text: _ctx.multiple ? '退出批量操作':'批量操作',\n            prefixIcon: \"multiple\",\n            prefixIconSize: \"1.5em\"\n          }, null, 8, [\"text\"])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_9, [\n      _createVNode(_component_table_view, {\n        style: {\"flex\":\"auto\"},\n        columns: _ctx.columns,\n        data: _ctx.songList,\n        onRowDblclick: _ctx.playMediaList,\n        onInfiniteScroll: _ctx.loadDataList\n      }, {\n        title: _withCtx(({item}) => [\n          _createElementVNode(\"span\", _hoisted_10, _toDisplayString(item.title), 1),\n          (item.vip)\n            ? (_openBlock(), _createBlock(_component_icon, {\n                key: 0,\n                class: \"vip-icon\",\n                name: \"vip\",\n                width: \"1em\",\n                height: \"1em\"\n              }))\n            : _createCommentVNode(\"\", true),\n          (item.vid)\n            ? (_openBlock(), _createBlock(_component_icon, {\n                key: 1,\n                class: \"mv-icon\",\n                name: \"mv\",\n                width: \"1em\",\n                height: \"1em\"\n              }))\n            : _createCommentVNode(\"\", true)\n        ]),\n        singer: _withCtx(({item:{singer:singers = []}}) => [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(singers, (singer, index) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: \"link cell-text\",\n              key: index,\n              \"data-mid\": singer.mid\n            }, _toDisplayString(singer.name), 9, _hoisted_11))\n          }), 128))\n        ]),\n        album: _withCtx(({item:{album}}) => [\n          album\n            ? (_openBlock(), _createElementBlock(\"span\", {\n                key: 0,\n                class: \"link cell-text\",\n                \"data-mid\": album.mid\n              }, _toDisplayString(album.name), 9, _hoisted_12))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      }, 8, [\"columns\", \"data\", \"onRowDblclick\", \"onInfiniteScroll\"]),\n      _createElementVNode(\"div\", _hoisted_13, \" 简介：\" + _toDisplayString(_ctx.album.introduce), 1)\n    ])\n  ], 64))\n}","\r\nimport Spinner from '../components/Spinner';\r\nimport {playMediaList} from '../player/hooks';\r\nimport {getAlbumSongList} from '../api';\r\n\r\nimport {Album, ComputedPage, Song} from '../../types';\r\n\r\nimport {reactive, watch, defineComponent, PropType, ref} from 'vue';\r\nimport {TableColumn} from '../components/types';\r\n\r\nexport default defineComponent({\r\n  name: 'AlbumView',\r\n\r\n  props: {query: Object as PropType<Album>},\r\n\r\n  setup(props) {\r\n    const songList = reactive<Song[]>([]);\r\n    const album = reactive<Album>({mid: '', name: '', cover: '', company: ''});\r\n    const page = {current: 1, size: 30, total: 1} as ComputedPage;\r\n\r\n    const columns = reactive<TableColumn[]>([\r\n      {type: 'index', width: '100px'},\r\n      {title: '歌曲', property: 'title', flex: true},\r\n      {title: '歌手', property: 'singer'},\r\n      {title: '时长', property: 'duration', width: '100px'},\r\n      {title: '大小', property: 'size', width: '100px'}\r\n    ]);\r\n\r\n    const multiple = ref(false);\r\n\r\n    watch(() => props.query, newQuery => {\r\n      if (newQuery && album.mid !== newQuery.mid) {\r\n        Spinner.open();\r\n\r\n        getAlbumSongList(page, newQuery).then(data => {\r\n          // 重设分页信息\r\n          Object.assign(page, data.page);\r\n          // 更新专辑信息\r\n          data.album && Object.assign(album, data.album);\r\n          // 添加歌曲数据\r\n          songList.splice(0, songList.length, ...data.list);\r\n\r\n        }).finally(Spinner.close);\r\n      }\r\n\r\n    }, {immediate: true});\r\n\r\n    return {\r\n      songList, page, album, columns, multiple,\r\n\r\n      playMediaList,\r\n\r\n      /** 加载歌曲数据到表格视图中 */\r\n      loadDataList() {\r\n        // 若还有数据, 则发起网络请求加载歌曲数据列表\r\n        if (page.current >= 1 && page.current < page.pageCount) {\r\n          ++page.current;\r\n          Spinner.open();\r\n\r\n          getAlbumSongList(page, album).then(data => {\r\n            // 重设置分页信息\r\n            data.page && Object.assign(page, data.page);\r\n            // 添加歌曲\r\n            songList.push(...data.list);\r\n\r\n          }).catch(() => --page.current).finally(Spinner.close);\r\n        }\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n});\r\n","import { render } from \"./AlbumView.vue?vue&type=template&id=79608fe4&ts=true\"\nimport script from \"./AlbumView.vue?vue&type=script&lang=ts\"\nexport * from \"./AlbumView.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\SCMQ\\\\project\\\\HTML\\\\mq-player-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}