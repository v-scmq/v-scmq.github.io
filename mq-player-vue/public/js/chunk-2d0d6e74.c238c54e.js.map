{"version":3,"sources":["webpack:///./src/renderer/views/SingerView.vue?d26c","webpack:///./src/renderer/views/SingerView.vue?fcdc","webpack:///./src/renderer/views/SingerView.vue"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","style","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_createTextVNode","render","_ctx","_cache","$props","$setup","$data","$options","_component_image_view","_resolveComponent","_component_Button","_component_icon","_component_table_view","_component_grid_view","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","modelValue","singer","cover","$event","defaultValue","_toDisplayString","name","songCount","albumCount","mvCount","fansCount","text","prefixIcon","prefixIconSize","multiple","_renderList","tabMap","tabList","item","index","_normalizeClass","active","value","key","onClick","title","_withDirectives","columns","data","songList","onRowDblclick","playMediaList","onInfiniteScroll","loadDataList","_withCtx","vip","_createBlock","width","height","_createCommentVNode","vid","singers","mid","album","_","_vShow","SONG_TAB","albumList","loadAlbumData","onCellClick","onAlbumItemClicked","default","ALBUM_TAB","mvList","loadMvData","MV_TAB","introduce","DETAIL_TAB","defineComponent","props","query","type","Object","required","setup","reactive","update","page","current","size","property","flex","ref","router","useRouter","handleTabChanged","newTab","Spinner","open","getSingerSongList","then","assign","splice","length","list","catch","finally","close","getSingerAlbumList","getSingerMvList","watch","forEach","tab","total","pageCount","immediate","push","path","__exports__"],"mappings":"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","file":"public/js/chunk-2d0d6e74.c238c54e.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createBlock as _createBlock, createCommentVNode as _createCommentVNode, vShow as _vShow, withCtx as _withCtx, withDirectives as _withDirectives, createTextVNode as _createTextVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"v-row data-container\" }\nconst _hoisted_2 = { class: \"v-column\" }\nconst _hoisted_3 = { class: \"v-row data-statistic\" }\nconst _hoisted_4 = { class: \"statistic-item\" }\nconst _hoisted_5 = { class: \"statistic-item\" }\nconst _hoisted_6 = { class: \"statistic-item\" }\nconst _hoisted_7 = { class: \"statistic-item\" }\nconst _hoisted_8 = { class: \"v-row\" }\nconst _hoisted_9 = { class: \"tab-pane v-column\" }\nconst _hoisted_10 = {\n  class: \"v-row tab-container\",\n  style: {\"justify-content\":\"center\"}\n}\nconst _hoisted_11 = [\"onClick\"]\nconst _hoisted_12 = { class: \"tab-content v-column\" }\nconst _hoisted_13 = { class: \"cell-text\" }\nconst _hoisted_14 = [\"data-mid\"]\nconst _hoisted_15 = [\"data-mid\"]\nconst _hoisted_16 = { class: \"name\" }\nconst _hoisted_17 = [\"data-mid\"]\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\" -\")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_image_view = _resolveComponent(\"image-view\")!\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_icon = _resolveComponent(\"icon\")!\n  const _component_table_view = _resolveComponent(\"table-view\")!\n  const _component_grid_view = _resolveComponent(\"grid-view\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_image_view, {\n        modelValue: _ctx.singer.cover,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.singer.cover) = $event)),\n        defaultValue: \"/icon/singer.png\"\n      }, null, 8, [\"modelValue\"]),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", null, _toDisplayString(_ctx.singer.name || '-'), 1),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"span\", _hoisted_4, \"单曲：\" + _toDisplayString(_ctx.singer.songCount || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_5, \"专辑：\" + _toDisplayString(_ctx.singer.albumCount || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_6, \"MV：\" + _toDisplayString(_ctx.singer.mvCount || '-'), 1),\n          _createElementVNode(\"span\", _hoisted_7, \"粉丝：\" + _toDisplayString(_ctx.singer.fansCount || '-'), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createVNode(_component_Button, {\n            text: \"播放全部\",\n            prefixIcon: \"play-select\",\n            prefixIconSize: \"1.5em\"\n          }),\n          _createVNode(_component_Button, {\n            text: \"添加到\",\n            prefixIcon: \"plus\",\n            prefixIconSize: \"1.5em\"\n          }),\n          _createVNode(_component_Button, {\n            text: \"下载\",\n            prefixIcon: \"my-download\",\n            prefixIconSize: \"1.5em\"\n          }),\n          _createVNode(_component_Button, {\n            text: \"删除\",\n            prefixIcon: \"trash\",\n            prefixIconSize: \"1.5em\"\n          }),\n          _createVNode(_component_Button, {\n            text: _ctx.multiple ? '退出批量操作':'批量操作',\n            prefixIcon: \"multiple\",\n            prefixIconSize: \"1.5em\"\n          }, null, 8, [\"text\"])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_9, [\n      _createElementVNode(\"div\", _hoisted_10, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.tabMap.tabList, (item, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: _normalizeClass([\"tab\", {active: _ctx.tabMap.value === item}]),\n            key: index,\n            onClick: ($event: any) => (_ctx.tabMap.value = item)\n          }, _toDisplayString(item.title), 11, _hoisted_11))\n        }), 128))\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _withDirectives(_createVNode(_component_table_view, {\n          style: {\"flex\":\"auto\"},\n          columns: _ctx.columns,\n          data: _ctx.songList,\n          onRowDblclick: _ctx.playMediaList,\n          onInfiniteScroll: _ctx.loadDataList\n        }, {\n          title: _withCtx(({item}) => [\n            _createElementVNode(\"span\", _hoisted_13, _toDisplayString(item.title), 1),\n            (item.vip)\n              ? (_openBlock(), _createBlock(_component_icon, {\n                  key: 0,\n                  class: \"vip-icon\",\n                  name: \"vip\",\n                  width: \"1em\",\n                  height: \"1em\"\n                }))\n              : _createCommentVNode(\"\", true),\n            (item.vid)\n              ? (_openBlock(), _createBlock(_component_icon, {\n                  key: 1,\n                  class: \"mv-icon\",\n                  name: \"mv\",\n                  width: \"1em\",\n                  height: \"1em\"\n                }))\n              : _createCommentVNode(\"\", true)\n          ]),\n          singer: _withCtx(({item:{singer:singers = []}}) => [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(singers, (singer, index) => {\n              return (_openBlock(), _createElementBlock(\"span\", {\n                class: \"link cell-text\",\n                key: index,\n                \"data-mid\": singer.mid\n              }, _toDisplayString(singer.name), 9, _hoisted_14))\n            }), 128))\n          ]),\n          album: _withCtx(({item:{album}}) => [\n            album\n              ? (_openBlock(), _createElementBlock(\"span\", {\n                  key: 0,\n                  class: \"link cell-text\",\n                  \"data-mid\": album.mid\n                }, _toDisplayString(album.name), 9, _hoisted_15))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }, 8, [\"columns\", \"data\", \"onRowDblclick\", \"onInfiniteScroll\"]), [\n          [_vShow, _ctx.tabMap.value===_ctx.tabMap.SONG_TAB]\n        ]),\n        _withDirectives(_createVNode(_component_grid_view, {\n          \"cell-widths\": \"repeat(auto-fit, 13em)\",\n          data: _ctx.albumList,\n          onInfiniteScroll: _ctx.loadAlbumData,\n          \"cell-height\": 234,\n          onCellClick: _ctx.onAlbumItemClicked\n        }, {\n          default: _withCtx(({item}) => [\n            _createVNode(_component_image_view, {\n              modelValue: item.cover,\n              \"onUpdate:modelValue\": ($event: any) => ((item.cover) = $event),\n              defaultValue: \"/icon/album.png\"\n            }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"]),\n            _createElementVNode(\"div\", _hoisted_16, _toDisplayString(item.name), 1)\n          ]),\n          _: 1\n        }, 8, [\"data\", \"onInfiniteScroll\", \"onCellClick\"]), [\n          [_vShow, _ctx.tabMap.value===_ctx.tabMap.ALBUM_TAB]\n        ]),\n        _withDirectives(_createVNode(_component_grid_view, {\n          class: \"arc-rect\",\n          \"cell-widths\": \"repeat(auto-fit, 16em)\",\n          data: _ctx.mvList,\n          \"cell-height\": 206,\n          onInfiniteScroll: _ctx.loadMvData\n        }, {\n          default: _withCtx(({item}) => [\n            _createVNode(_component_image_view, {\n              modelValue: item.cover,\n              \"onUpdate:modelValue\": ($event: any) => ((item.cover) = $event),\n              defaultValue: \"/icon/mv.png\"\n            }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"]),\n            _createElementVNode(\"div\", null, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.singer, (singer, index) => {\n                return (_openBlock(), _createElementBlock(\"span\", {\n                  class: \"link\",\n                  key: index,\n                  \"data-mid\": singer.mid\n                }, _toDisplayString(singer.name), 9, _hoisted_17))\n              }), 128)),\n              _hoisted_18,\n              _createElementVNode(\"span\", null, _toDisplayString(item.title), 1)\n            ])\n          ]),\n          _: 1\n        }, 8, [\"data\", \"onInfiniteScroll\"]), [\n          [_vShow, _ctx.tabMap.value===_ctx.tabMap.MV_TAB]\n        ]),\n        _withDirectives(_createElementVNode(\"div\", { class: \"label\" }, _toDisplayString(_ctx.singer.introduce), 513), [\n          [_vShow, _ctx.tabMap.value===_ctx.tabMap.DETAIL_TAB]\n        ])\n      ])\n    ])\n  ], 64))\n}","\r\nimport Spinner from '../components/Spinner';\r\nimport {playMediaList} from '../player/hooks';\r\nimport {getSingerAlbumList, getSingerMvList, getSingerSongList} from '../api';\r\n\r\nimport {Album, Mv, Singer, Song, ComputedPage} from '../../types';\r\nimport {TableColumn} from '../components/types';\r\n\r\nimport {reactive, watch, PropType, defineComponent, ref} from 'vue';\r\nimport {useRouter} from 'vue-router';\r\n\r\n/**\r\n * 选项卡信息\r\n */\r\ntype Tab = {\r\n  /** 选项卡标题 */\r\n  title: string;\r\n  /** 数据是否需要更新 */\r\n  update: boolean;\r\n  /** 选项卡对应的视图是分页信息 */\r\n  page?: ComputedPage;\r\n};\r\n\r\nexport default defineComponent({\r\n  name: 'SingerView',\r\n\r\n  props: {\r\n    query: {type: Object as PropType<Singer>, required: true}\r\n  },\r\n\r\n  setup(props) {\r\n    const singer = reactive<Singer>({});\r\n    const songList = reactive<Song[]>([]);\r\n    const albumList = reactive<Album[]>([]);\r\n    const mvList = reactive<Mv[]>([]);\r\n\r\n    const SONG_TAB: Tab = {title: '歌曲', update: true, page: {current: 1, size: 30} as ComputedPage};\r\n    const ALBUM_TAB: Tab = {title: '专辑', update: true, page: {current: 1, size: 30} as ComputedPage};\r\n    const MV_TAB: Tab = {title: 'MV', update: true, page: {current: 1, size: 30} as ComputedPage};\r\n    const DETAIL_TAB: Tab = {title: '详情', update: true};\r\n    const tabList = [SONG_TAB, ALBUM_TAB, MV_TAB, DETAIL_TAB];\r\n    const tabMap = reactive({value: SONG_TAB, tabList, SONG_TAB, ALBUM_TAB, MV_TAB, DETAIL_TAB});\r\n\r\n    const columns = reactive<TableColumn[]>([\r\n      {type: 'index', width: '100px'},\r\n      {title: '歌曲', property: 'title', flex: true},\r\n      {title: '歌手', property: 'singer'},\r\n      {title: '专辑', property: 'album'},\r\n      {title: '时长', property: 'duration', width: '100px'}\r\n    ]);\r\n\r\n    const multiple = ref(false);\r\n\r\n    const router = useRouter();\r\n\r\n    /**\r\n     * 处理选项卡改变事件\r\n     *\r\n     * @param newTab 新选定的选项卡\r\n     */\r\n    const handleTabChanged = (newTab: Tab) => {\r\n      // 若未选定任何一个选项卡 或 当前选项卡无需更新数据, 则什么也不做\r\n      if (!newTab || !newTab.update) return;\r\n      // 立刻重置为无需更新状态\r\n      newTab.update = false;\r\n\r\n      // 分页信息\r\n      const page = newTab.page as ComputedPage;\r\n\r\n      if (newTab === tabMap.SONG_TAB) {\r\n        Spinner.open();\r\n        getSingerSongList(page, singer).then(data => {\r\n          // 修改分页信息\r\n          data.page && Object.assign(page, data.page);\r\n          // 修改歌手信息\r\n          data.singer && Object.assign(singer, data.singer);\r\n          // 添加歌曲\r\n          songList.splice(0, songList.length, ...data.list);\r\n\r\n        }).catch(() => newTab.update = true).finally(Spinner.close);\r\n      }\r\n\r\n      if (newTab === tabMap.ALBUM_TAB) {\r\n        Spinner.open();\r\n        getSingerAlbumList(page, singer).then(data => {\r\n          // 修改分页信息\r\n          data.page && Object.assign(page, data.page);\r\n          // 添加专辑\r\n          albumList.splice(0, albumList.length, ...data.list);\r\n\r\n        }).catch(() => newTab.update = true).finally(Spinner.close);\r\n      }\r\n\r\n      if (newTab === tabMap.MV_TAB) {\r\n        Spinner.open();\r\n        getSingerMvList(page, singer).then(data => {\r\n          // 修改分页信息\r\n          data.page && Object.assign(page, data.page);\r\n          // 添加Mv\r\n          mvList.splice(0, mvList.length, ...data.list);\r\n\r\n        }).catch(() => newTab.update = true).finally(Spinner.close);\r\n      }\r\n    };\r\n\r\n    // 监听查询参数改变\r\n    watch(() => props.query, (value: Singer) => {\r\n      if (singer.mid !== value.mid && value.mid) {\r\n        // 重设歌手信息\r\n        Object.assign(singer, value);\r\n\r\n        tabMap.tabList.forEach(tab => {\r\n          tab.update = true;\r\n          if (tab.page) {\r\n            // 清除分页数据\r\n            tab.page.total = 0;\r\n            tab.page.current = 1;\r\n            tab.page.pageCount = 0;\r\n          }\r\n        });\r\n\r\n        // 若当前是歌曲选项卡,则手动调用handleChange方法处理\r\n        if (tabMap.value === tabMap.SONG_TAB) {\r\n          handleTabChanged(tabMap.SONG_TAB);\r\n        } else {\r\n          // 否则通过改变选项卡 触发handleChange方法\r\n          tabMap.value = tabMap.SONG_TAB;\r\n        }\r\n      }\r\n    }, {immediate: true});\r\n\r\n    // 监听选项卡选择改变\r\n    watch(() => tabMap.value, handleTabChanged);\r\n\r\n    return {\r\n      tabMap, singer, columns, songList, albumList, mvList, multiple,\r\n\r\n      playMediaList,\r\n\r\n      /**\r\n       * 当专辑列表项点击时,跳转到专辑视图\r\n       *\r\n       * @param {Album} album 专辑信息\r\n       */\r\n      onAlbumItemClicked(album: Album) {\r\n        // 若存在专辑信息, 则跳转到专辑视图\r\n        album && router.push({path: '/album-view', query: {...album, singer: null}});\r\n      },\r\n\r\n      /** 加载歌曲数据到表格视图中 */\r\n      loadDataList() {\r\n        const page = tabMap.SONG_TAB.page as ComputedPage;\r\n\r\n        // 若还有数据, 则发起网络请求加载歌曲数据列表\r\n        if (page.current >= 1 && page.current < page.pageCount) {\r\n          ++page.current;\r\n          Spinner.open();\r\n\r\n          getSingerSongList(page, singer).then(data => {\r\n            // 重设置分页信息\r\n            data.page && Object.assign(page, data.page);\r\n            // 添加歌曲\r\n            songList.push(...data.list);\r\n\r\n          }).catch(() => --page.current).finally(Spinner.close);\r\n        }\r\n      },\r\n\r\n      /** 加载数据到视图上(无限滚动触发点) */\r\n      loadAlbumData() {\r\n        const page = tabMap.MV_TAB.page as ComputedPage;\r\n        // 若还有数据, 则发起网络请求加载歌曲数据列表\r\n        if (page.current >= 1 && page.current < page.pageCount) {\r\n          Spinner.open();\r\n\r\n          ++page.current;\r\n\r\n          getSingerAlbumList(page, singer).then(data => {\r\n            // 修改分页信息\r\n            data.page && Object.assign(page, data.page);\r\n            // 添加专辑\r\n            albumList.push(...data.list);\r\n\r\n          }).catch(() => --page.current).finally(Spinner.close);\r\n        }\r\n      },\r\n\r\n      /** 加载数据到视图上(无限滚动触发点) */\r\n      loadMvData() {\r\n        const page = tabMap.MV_TAB.page as ComputedPage;\r\n        // 若还有数据, 则发起网络请求加载歌曲数据列表\r\n        if (page.current >= 1 && page.current < page.pageCount) {\r\n          Spinner.open();\r\n\r\n          ++page.current;\r\n\r\n          getSingerMvList(page, singer).then(data => {\r\n            // 修改分页信息\r\n            data.page && Object.assign(page, data.page);\r\n            // 添加Mv\r\n            mvList.push(...data.list);\r\n\r\n          }).catch(() => --page.current).finally(Spinner.close);\r\n        }\r\n      }\r\n\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./SingerView.vue?vue&type=template&id=04c0065b&ts=true\"\nimport script from \"./SingerView.vue?vue&type=script&lang=ts\"\nexport * from \"./SingerView.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\SCMQ\\\\project\\\\HTML\\\\mq-player-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}