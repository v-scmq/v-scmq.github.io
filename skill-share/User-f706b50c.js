import{A as N,C as E,J as f,N as U,o as v,c as _,W as c,X as u,V as b,af as o,ag as B,ah as $,ai as s,ae as I,_ as z,am as A,G as h,O as P,ac as T,ab as m,a5 as n,bx as g,bt as j,by as O,bz as C,bA as q,ay as D,b4 as F}from"./index-06fed232.js";import{f as G}from"./index-983a9675.js";const J=N({header:{type:String,default:""},bodyStyle:{type:E([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),L=f({name:"ElCard"}),M=f({...L,props:J,setup(y){const t=U("card");return(e,d)=>(v(),_("div",{class:c([u(t).b(),u(t).is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?(v(),_("div",{key:0,class:c(u(t).e("header"))},[b(e.$slots,"header",{},()=>[o(B(e.header),1)])],2)):$("v-if",!0),s("div",{class:c([u(t).e("body"),e.bodyClass]),style:I(e.bodyStyle)},[b(e.$slots,"default")],6)],2))}});var W=z(M,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const X=A(W);const x=["src"],Q=f({__name:"User",props:{rid:{type:String,required:!0}},setup(y){const t=y,e=h({}),d=h(null),V=()=>{const{files:l}=d.value;if(!(!l||l.length<1)){if(l[0].size>5<<20){g.error("头像最大允许为5MB！");return}G(l[0]).then(a=>{a?e.value.avatar=a:g.error("请确保所选文件是一个支持的图片格式！")})}},k=()=>{const l=j.service({lock:!0}),a={...e.value};delete a.id,O(a).then(i=>{i&&(C().value={...e.value}),l.close()})};return P(()=>t.rid,l=>{e.value=l?{...C().value}:{}},{immediate:!0}),(l,a)=>{const i=q,p=D,S=F,w=X;return v(),T(w,{class:"user--card",header:"个人信息"},{default:m(()=>[n(i,{class:"avatar--upload"},{default:m(()=>[s("div",{class:"avatar--cover",onClick:a[0]||(a[0]=r=>d.value.click())},"更换头像"),s("img",{alt:"",src:e.value.avatar},null,8,x)]),_:1}),s("span",null,[o("昵称："),n(p,{modelValue:e.value.nickName,"onUpdate:modelValue":a[1]||(a[1]=r=>e.value.nickName=r)},null,8,["modelValue"])]),s("span",null,[o("邮箱："),n(p,{modelValue:e.value.email,"onUpdate:modelValue":a[2]||(a[2]=r=>e.value.email=r)},null,8,["modelValue"])]),s("span",null,[o("简介："),n(p,{type:"textarea",modelValue:e.value.describe,"onUpdate:modelValue":a[3]||(a[3]=r=>e.value.describe=r)},null,8,["modelValue"])]),n(S,{type:"primary",round:"",disabled:!e.value.id,onClick:k},{default:m(()=>[o("更新")]),_:1},8,["disabled"]),s("input",{style:{display:"none"},type:"file",ref_key:"fileInput",ref:d,accept:".png,.jpg",onChange:V},null,544)]),_:1})}}});export{Q as default};
