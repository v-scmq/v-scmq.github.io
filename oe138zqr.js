import{ap as ae,av as le,ax as te,d as q,aW as oe,m as L,am as R,aA as ne,c as E,o as u,v as B,f as $,ak as M,e as n,z as re,x as p,aF as se,a2 as P,aM as ie,r as h,s as de,p as T,n as ue,i as w,b3 as A,a as g,b as t,F as S,b4 as me,l as V,B as pe,g as I,A as ce,E as fe,h as C,D as ve,G as ge,C as ye,t as O,b5 as ke,b6 as _e,Q as be,b7 as he,b8 as we}from"./e3hakuts.js";import{E as Ve,a as Ce,b as Ee}from"./jxax244e.js";import{E as Be,a as xe}from"./nsacsdt8.js";import{_ as $e}from"./l09hxlu4.js";import{_ as Ue}from"./l8v1l1nb.js";const Le=ae({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:"hover"},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:le}}),Se={click:x=>x instanceof MouseEvent},qe=q({name:"ElLink"}),De=q({...qe,props:Le,emits:Se,setup(x,{emit:c}){const i=x;oe({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},L(()=>R(i.underline)));const m=ne("link"),s=L(()=>[m.b(),m.m(i.type),m.is("disabled",i.disabled),m.is("underline",d.value==="always"),m.is("hover-underline",d.value==="hover"&&!i.disabled)]),d=L(()=>R(i.underline)?i.underline?"hover":"never":i.underline);function y(o){i.disabled||c("click",o)}return(o,b)=>(u(),E("a",{class:P(p(s)),href:o.disabled||!o.href?void 0:o.href,target:o.disabled||!o.href?void 0:o.target,onClick:y},[o.icon?(u(),B(p(se),{key:0},{default:n(()=>[(u(),B(re(o.icon)))]),_:1})):$("v-if",!0),o.$slots.default?(u(),E("span",{key:1,class:P(p(m).e("inner"))},[M(o.$slots,"default")],2)):$("v-if",!0),o.$slots.icon?M(o.$slots,"icon",{key:2}):$("v-if",!0)],10,["href","target"]))}});var Ne=te(De,[["__file","link.vue"]]);const Fe=ie(Ne),Re={class:"col card-item grow"},Me={class:"row label-wrapper"},Pe={class:"row"},Te={class:"row label-wrapper"},Ae={class:"row"},Ie={class:"row center"},Qe=q({__name:"Bookmark",setup(x){const c=h(!1),i={category:[{required:!0,message:"必须输入分类名称"},{max:32,message:"分类名称长度不能超过32"}],name:[{required:!0,message:"必须输入书签名"},{max:32,message:"书签名长度不能超过32"}],url:[{required:!0,message:"必须输入链接地址"},{max:255,message:"链接地址长度不能超过255"},{trigger:"blur",validator(l,e,r){try{new URL(e),r()}catch{r("链接不合法")}}}]},m=h(null),s=h({});let d;const y=de([]),o=h(""),b=h(!1),f=T({category:"",name:"",oldCategory:""}),W=[{type:"index",title:"序号",width:"60px",fixed:"left",align:"center"},{title:"分类",field:"category",width:"minmax(120px, 200px)"},{title:"名称",field:"name",width:"minmax(160px, 1fr)"},{title:"创建时间",field:"createTime",width:"144px",align:"center"},{field:"oper",width:"94px",fixed:"right",align:"center"}],_=T([]),z=ue(),G=l=>{const e=_[l].id;w(),ke(e).then(r=>{r&&_.splice(l,1),V()})},D=l=>{d=l,c.value=!0,s.value=l?{category:l.category,name:l.name,url:l.url}:{}},K=async()=>{try{await m.value.validate()}catch{return}if(c.value=!1,w(),d&&d.id){const r={id:d.id,category:s.value.category,name:s.value.name,url:s.value.url},v=await _e(r);!v.error&&be(d,v.data),V();return}const l={...s.value},e=await he(l);!e.error&&_.push(e.data),V()},Q=l=>{b.value||f.oldCategory===l||(f.oldCategory=l,b.value=!0,A(l).then(e=>{y.value=(e.data||[]).map(r=>({label:r,value:r})),b.value=!1}))},j=()=>{w();const l=o.value;o.value="",we(l).then(e=>{e.data&&(y.value=e.data.map(r=>({label:r,value:r}))),V()})},N=()=>{const l={category:f.category||void 0,name:f.name||void 0};w(),me(l).then(e=>{V(),_.splice(0,_.length,...e.data||[])})};return w(),A().then(l=>{y.value=(l.data||[]).map(e=>({label:e,value:e})),N()}),(l,e)=>{const r=xe,v=ce,k=fe,F=Be,H=Fe,J=Ve,U=Ee,X=Ce,Y=pe;return u(),E(S,null,[g("div",Re,[t(Ue,{"min-width":600,"media-width":p(z)},{default:n(()=>[g("div",Me,[e[10]||(e[10]=g("span",{class:"label"},"分类",-1)),t(F,{remote:"",filterable:"",placeholder:"全部",modelValue:f.category,"onUpdate:modelValue":e[1]||(e[1]=a=>f.category=a),"remote-method":Q,loading:b.value},{footer:n(()=>[g("div",Pe,[t(v,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),style:{flex:"1"}},null,8,["modelValue"]),t(k,{type:"primary",disabled:!o.value,onClick:j},{default:n(()=>e[9]||(e[9]=[C("添加")])),_:1},8,["disabled"])])]),default:n(()=>[t(r,{label:"全部",value:""}),(u(!0),E(S,null,I(y.value,a=>(u(),B(r,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),g("div",Te,[e[11]||(e[11]=g("span",{class:"label"},"名称",-1)),t(v,{placeholder:"请输入名称",modelValue:f.name,"onUpdate:modelValue":e[2]||(e[2]=a=>f.name=a)},null,8,["modelValue"])]),t(k,{type:"primary",onClick:N},{default:n(()=>e[12]||(e[12]=[C("检索")])),_:1})]),_:1},8,["media-width"]),t($e,{columns:W,data:_,"cell-height":48},{name:n(({row:a})=>[t(H,{target:"_blank",underline:"never",href:a.url},{default:n(()=>[C(O(a.name),1)]),_:2},1032,["href"])]),"h-oper":n(()=>[t(k,{type:"success",circle:"",icon:p(ye),onClick:e[3]||(e[3]=a=>D())},null,8,["icon"])]),oper:n(({row:a,idx:Z})=>[g("div",Ae,[t(k,{type:"primary",circle:"",icon:p(ve),onClick:ee=>D(a)},null,8,["icon","onClick"]),t(J,{width:"256",title:"确定删除吗，删除后将无法恢复？",onConfirm:ee=>G(Z)},{reference:n(()=>[t(k,{type:"danger",circle:"",icon:p(ge)},null,8,["icon"])]),_:2},1032,["onConfirm"])])]),_:1},8,["data"])]),c.value?(u(),B(Y,{key:0,width:"460",class:"bookmark--modal","align-center":"",title:p(d)?"编辑书签":"添加书签",modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=a=>c.value=a)},{default:n(()=>[t(X,{"label-position":"left","label-width":"60px",ref_key:"formRef",ref:m,model:s.value,rules:i},{default:n(()=>[t(U,{label:"分类",prop:"category"},{default:n(()=>[t(F,{modelValue:s.value.category,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.category=a),filterable:"",placeholder:""},{default:n(()=>[(u(!0),E(S,null,I(y.value,a=>(u(),B(r,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(U,{label:"名称",prop:"name"},{default:n(()=>[t(v,{modelValue:s.value.name,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.name=a)},null,8,["modelValue"])]),_:1}),t(U,{label:"链接",prop:"url"},{default:n(()=>[t(v,{modelValue:s.value.url,"onUpdate:modelValue":e[6]||(e[6]=a=>s.value.url=a)},null,8,["modelValue"])]),_:1}),g("div",Ie,[t(k,{type:"primary",onClick:K},{default:n(()=>[C(O(p(d)?"编辑":"添加"),1)]),_:1}),t(k,{type:"primary",onClick:e[7]||(e[7]=a=>c.value=!1)},{default:n(()=>e[13]||(e[13]=[C("取消")])),_:1})])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])):$("",!0)],64)}}});export{Qe as default};
