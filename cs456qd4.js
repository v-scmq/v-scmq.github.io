import{d as k,r as f,u as B,w as C,c,a,b as w,e as y,f as E,t,F as m,g as L,E as N,o as r,h as V,i as b,k as q,j as _,q as A,l as D}from"./goe0pc8a.js";import{E as S}from"./lglh4d5g.js";const U={class:"card-item col"},F={class:"row"},j={class:"row cards"},H={class:"c-card col"},M={class:"row"},P={class:"col a-cen"},T={class:"percentage-value"},$={class:"percentage-label"},z={key:0,class:"c-card col"},G={class:"grid"},I={class:"cell"},J={class:"cell"},R=k({__name:"Home",setup(K){const u=f({val:"",max:"",items:[]}),l=f({val:"",max:"",items:[]}),[v]=B(),g=async()=>{let d=v.value;if(d&&b(),await navigator.storage.estimate().then(e=>{let n=e.quota||1,o=e.usage||0,s=e.usageDetails||{},p=q(s).map(i=>[i,s[i]]),h=_(n);p.length<1&&p.push(["unknown",o]),u.value={val:_(o),max:h,items:p.map(([i,x])=>({name:i.charAt(0).toUpperCase()+i.slice(1),val:_(x),max:h,per:Math.ceil(x/n*100)}))}}),d){const{data:e}=await A(),n=e.reduce((o,s)=>o+s.count,0);l.value={val:`${n}次`,max:"暂无限制",items:e},D()}else l.value={val:"",max:"",items:[]}};return C(v,g,{immediate:!0}),(d,e)=>{const n=N,o=S;return r(),c("div",U,[a("div",F,[w(n,{round:"",type:"primary",onClick:g},{default:y(()=>e[0]||(e[0]=[V("刷新")])),_:1})]),a("div",j,[a("div",H,[a("span",null,"本地存储（"+t(u.value.val)+" / "+t(u.value.max)+"）",1),a("div",M,[(r(!0),c(m,null,L(u.value.items,s=>(r(),c("div",P,[w(o,{type:"circle",percentage:s.per},{default:y(()=>[a("span",T,t(s.per)+"%",1),a("span",$,t(s.name),1)]),_:2},1032,["percentage"]),a("span",null,t(s.val)+" / "+t(s.max),1)]))),256))])]),l.value.items.length?(r(),c("div",z,[a("span",null,"接口调用统计结果（"+t(l.value.val)+" / "+t(l.value.max)+"）",1),a("div",G,[e[1]||(e[1]=a("span",{class:"cell"},"名称",-1)),e[2]||(e[2]=a("span",{class:"cell"},"次数",-1)),(r(!0),c(m,null,L(l.value.items,s=>(r(),c(m,null,[a("span",I,t(s.name),1),a("span",J,t(s.count),1)],64))),256))])])):E("",!0)])])}}});export{R as default};
